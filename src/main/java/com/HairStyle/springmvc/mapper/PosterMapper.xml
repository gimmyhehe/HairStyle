<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.HairStyle.springmvc.dao.IPosterDao">
	<resultMap id="BaseResultMap" type="com.HairStyle.springmvc.model.Poster">
		<result column="post_user_id" property="post_user_name" jdbcType="VARCHAR" />
		<result column="post_id" property="post_id" jdbcType="VARCHAR" />
		<result column="post_type" property="post_type" jdbcType="VARCHAR" />
		<result column="post_content" property="post_content" jdbcType="VARCHAR" />
		<result column="post_time" property="post_time" jdbcType="VARCHAR" />
		<result column="pic_one" property="pic_one" jdbcType="VARCHAR" />
		<result column="pic_two" property="pic_two" jdbcType="VARCHAR" />
		<result column="pic_three" property="pic_three" jdbcType="VARCHAR" />
		<result column="pic_four" property="pic_four" jdbcType="VARCHAR" />
		<result column="pic_five" property="pic_five" jdbcType="VARCHAR" />
		<result column="pic_six" property="pic_six" jdbcType="VARCHAR" />
		<result column="pic_seven" property="pic_seven" jdbcType="VARCHAR" />
		<result column="pic_eight" property="pic_eight" jdbcType="VARCHAR" />
		<result column="pic_nine" property="pic_nine" jdbcType="VARCHAR" />
		<result column="last_edit_time" property="last_edit_time" jdbcType="DATE" />
	</resultMap>

	<!--用户发布贴文 -->
	<insert id="post_article" parameterType="java.util.Map" useGeneratedKeys="true" keyProperty="id">
		insert into poster (post_user_id,post_id,post_type,post_content,post_time,pic_one,pic_two,pic_three,pic_four,pic_five,pic_six,pic_seven,pic_eight,pic_nine)
		VALUES
		(#{post_user_id,jdbcType=VARCHAR},#{post_id,jdbcType=VARCHAR},#{post_type,jdbcType=VARCHAR},#{post_content,jdbcType=VARCHAR},#{post_time,jdbcType=DATE},#{pic_one,jdbcType=VARCHAR},
		#{pic_two,jdbcType=VARCHAR},#{pic_three,jdbcType=VARCHAR},#{pic_four,jdbcType=VARCHAR},#{pic_five,jdbcType=VARCHAR},#{pic_six,jdbcType=VARCHAR},#{pic_seven,jdbcType=VARCHAR},
		#{pic_eight,jdbcType=VARCHAR},#{pic_nine,jdbcType=VARCHAR})	
	</insert>
	
	<!--按用户展示所有贴文 -->
	<select id="findPostByUser_id" parameterType="java.util.Map" resultType="com.HairStyle.springmvc.model.User">
		select * from post
		where post_user_id=#{post_user_id}
	</select>
	
	<!-- 查找重复 -->
	<select id="findUsersByUsername" resultType="com.HairStyle.springmvc.model.User">
		select * from user
		where user_name=#{user_name}
	</select>
	<select id="findUsersByPhone" resultType="com.HairStyle.springmvc.model.User">
		select * from user
		where phone_area=#{phone_area} AND phone_number=#{phone_number}
	</select>
	<select id="findUsersByEmail" resultType="com.HairStyle.springmvc.model.User">
		select * from user
		where email=#{email}
	</select>
	
	<!--修改资料 -->
	<update id="modifyPasswordByUser_name" parameterType="com.HairStyle.springmvc.model.User">
		update user set password=#{password} where user_name=#{user_name}
	</update>
	
	<update id="modifyUser_dataByUser_name" parameterType="java.util.Map" useGeneratedKeys="true" keyProperty="id">
		update user set email=#{email,jdbcType=VARCHAR},gender=#{gender,jdbcType=VARCHAR},birth_date=#{birth_date,jdbcType=DATE},
		phone_area=#{phone_area,jdbcType=VARCHAR},phone_number=#{phone_number,jdbcType=VARCHAR},face_type=#{face_type,jdbcType=VARCHAR},career=#{career,jdbcType=VARCHAR}			
	</update>

	<!-- 获取用户个人资料 -->
	<select id="get_user_data" parameterType="java.util.Map" resultType="com.HairStyle.springmvc.model.User">
		SELECT
		*
		FROM
		user
		WHERE
		user_name=#{user_name,jdbcType=VARCHAR}

	</select>

</mapper>  